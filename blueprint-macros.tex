% ============================================================
%  Blueprint shared macros — \input{blueprint-macros} once
%  after \begin{document} before any blueprint \input calls.
%
%  Required in main.tex preamble:
%    \usepackage{tcolorbox}
%    \tcbuselibrary{skins}
%    \usepackage{amsthm,amsmath,amssymb,xcolor}
%    all \definecolor{cSet}...{cVS} definitions
%    \newtheorem{definition}{Definition}[chapter]  (or similar)
%    \newtheorem{remark}{Remark}[chapter]
% ============================================================

% ── Section boxes ─────────────────────────────────────────────
% NEW: strong frame in structure colour
\newtcolorbox{bpnew}[2]{
  enhanced,
  colback   = #1!14!white,
  colframe  = #1!80!black,
  coltitle  = white,
  fonttitle = \bfseries\scshape\small,
  title     = #2,
  boxrule   = 1.0pt, arc=2pt,
  left=7pt, right=7pt, top=4pt, bottom=5pt,
  toptitle=3pt, bottomtitle=3pt,
  before skip=0pt, after skip=7pt,
}

% INHERITED: faded frame in ancestor colour
\newtcolorbox{bpinh}[2]{
  enhanced,
  colback   = #1!7!white,
  colframe  = #1!38!white,
  coltitle  = #1!70!black,
  fonttitle = \bfseries\scshape\small,
  title     = #2,
  boxrule   = 0.6pt, arc=2pt,
  left=7pt, right=7pt, top=4pt, bottom=5pt,
  toptitle=3pt, bottomtitle=3pt,
  before skip=0pt, after skip=7pt,
}

% ── Entry line ────────────────────────────────────────────────
% \bpitem{symbol}{math}{gloss}   (gloss may be empty)
\newcommand{\bpitem}[3]{%
  \noindent
  {\small\bfseries #1}\hspace{6pt}%
  $\displaystyle #2$%
  \ifx\relax#3\relax\else
    \hfill{\small\rmfamily\itshape\color{lbltext!75}\,[#3]}%
  \fi
  \par\vspace{3pt}%
}

% ── Page header ───────────────────────────────────────────────
% \bpheader{colour}{Name}{signature}
\newcommand{\bpheader}[3]{%
  \noindent\vbox{\offinterlineskip
    \hbox{\colorbox{#1!85!black}{%
      \parbox[c][2.4em]{\dimexpr\linewidth-2\fboxsep\relax}{%
        \color{nodetext}%
        \hspace{8pt}{\large\bfseries #2}%
        \enspace{\normalsize\ttfamily\color{sigtext} #3}%
        \hfill{\footnotesize\scshape\bfseries Structure Blueprint\hspace{8pt}}%
      }%
    }}%
  }\par\vspace{8pt}%
}

% ── Footer ────────────────────────────────────────────────────
% \bpfooter{left}{right}
\newcommand{\bpfooter}[2]{%
  \vfill
  \noindent\hrule\vspace{4pt}%
  \noindent
  \begin{minipage}[t]{0.49\linewidth}\scriptsize #1\end{minipage}%
  \hfill
  \begin{minipage}[t]{0.49\linewidth}\scriptsize #2\end{minipage}%
}